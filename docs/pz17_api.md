# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–Ω—è—Ç–∏—è ‚Ññ1

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ë–∞–∑–æ–≤—ã–µ URL

- **Auth Service:** `http://localhost:8081`
- **Tasks Service:** `http://localhost:8082`

### –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
- –ö–æ–¥–∏—Ä–æ–≤–∫–∞: UTF-8
- Content-Type: `application/json`

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –æ–±—â–∏–µ

| –ó–∞–≥–æ–ª–æ–≤–æ–∫       | –û–ø–∏—Å–∞–Ω–∏–µ                       | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å                  |
| --------------- | ------------------------------ | ------------------------------- |
| `Content-Type`  | –î–æ–ª–∂–µ–Ω –±—ã—Ç—å `application/json` | –î–ª—è POST/PATCH                  |
| `X-Request-ID`  | UUID –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞   | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ                     |
| `Authorization` | `Bearer <token>`               | –î–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ Tasks |

### –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤ HTTP

| –ö–æ–¥                         | –û–ø–∏—Å–∞–Ω–∏–µ                                              |
| --------------------------- | ----------------------------------------------------- |
| `200 OK`                    | –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å (GET, PATCH)                          |
| `201 Created`               | –†–µ—Å—É—Ä—Å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω (POST)                          |
| `204 No Content`            | –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å –±–µ–∑ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞ (DELETE)              |
| `400 Bad Request`           | –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞                               |
| `401 Unauthorized`          | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω                      |
| `403 Forbidden`             | –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ (—Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω, –Ω–æ –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω) |
| `404 Not Found`             | –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω                                      |
| `500 Internal Server Error` | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞                             |

---

## üîê Auth Service (–ø–æ—Ä—Ç: 8081)

–°–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –≤—ã–¥–∞—á—É —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞.

---

### 1. –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (Login)

–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–º —É—á–µ—Ç–Ω—ã–º –¥–∞–Ω–Ω—ã–º.

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /v1/auth/login`

#### –ó–∞–ø—Ä–æ—Å

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**

```
Content-Type: application/json
X-Request-ID: req-001
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "username": "student",
  "password": "student"
}
```

| –ü–æ–ª–µ       | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                                          |
| ---------- | ------ | ------------------------------------------------- |
| `username` | string | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤ –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ —Ç–æ–ª—å–∫–æ "student") |
| `password` | string | –ü–∞—Ä–æ–ª—å (–≤ –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ —Ç–æ–ª—å–∫–æ "student")           |

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)

```json
{
  "access_token": "demo-token",
  "token_type": "Bearer"
}
```

| –ü–æ–ª–µ           | –¢–∏–ø    | –û–ø–∏—Å–∞–Ω–∏–µ                               |
| -------------- | ------ | -------------------------------------- |
| `access_token` | string | –¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ |
| `token_type`   | string | –¢–∏–ø —Ç–æ–∫–µ–Ω–∞ (–≤—Å–µ–≥–¥–∞ "Bearer")           |

#### –û—Ç–≤–µ—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö

**400 Bad Request**

```json
{
  "error": "invalid request"
}
```

**401 Unauthorized**

```json
{
  "error": "invalid credentials"
}
```

#### –ü—Ä–∏–º–µ—Ä—ã curl

**–£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å:**

```bash
curl -s -X POST http://localhost:8081/v1/auth/login \
  -H "Content-Type: application/json" \
  -H "X-Request-ID: req-001" \
  -d '{"username":"student","password":"student"}' | jq
```

**–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**

```bash
curl -i -X POST http://localhost:8081/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"wrong"}'
```

---

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ (Verify)

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞.

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /v1/auth/verify`

#### –ó–∞–ø—Ä–æ—Å

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**

```
Authorization: Bearer demo-token
X-Request-ID: req-002
```

| –ó–∞–≥–æ–ª–æ–≤–æ–∫       | –û–ø–∏—Å–∞–Ω–∏–µ                         |
| --------------- | -------------------------------- |
| `Authorization` | –¢–æ–∫–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ `Bearer <token>` |
| `X-Request-ID`  | ID –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) |

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)

```json
{
  "valid": true,
  "subject": "student"
}
```

| –ü–æ–ª–µ      | –¢–∏–ø     | –û–ø–∏—Å–∞–Ω–∏–µ                   |
| --------- | ------- | -------------------------- |
| `valid`   | boolean | –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞  |
| `subject` | string  | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

#### –û—Ç–≤–µ—Ç –æ–± –æ—à–∏–±–∫–µ (401 Unauthorized)

```json
{
  "valid": false,
  "error": "unauthorized"
}
```

–ò–ª–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø—Ä–∏—á–∏–Ω–æ–π:

```json
{
  "valid": false,
  "error": "missing token"
}
```

```json
{
  "valid": false,
  "error": "invalid auth header"
}
```

```json
{
  "valid": false,
  "error": "invalid token"
}
```

#### –ü—Ä–∏–º–µ—Ä—ã curl

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞:**

```bash
curl -i http://localhost:8081/v1/auth/verify \
  -H "Authorization: Bearer demo-token" \
  -H "X-Request-ID: req-002"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞:**

```bash
curl -i http://localhost:8081/v1/auth/verify
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º:**

```bash
curl -i http://localhost:8081/v1/auth/verify \
  -H "Authorization: Bearer wrong-token"
```

---

## ‚úÖ Tasks Service (–ø–æ—Ä—Ç: 8082)

–°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏. –í—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω.

### –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:**

```
Authorization: Bearer demo-token
X-Request-ID: req-003
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**

**401 Unauthorized**

```json
{
  "error": "missing authorization header"
}
```

```json
{
  "error": "invalid authorization header format"
}
```

```json
{
  "error": "invalid token"
}
```

**500 Internal Server Error** (–ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Auth Service)

```json
{
  "error": "authorization service unavailable"
}
```

---

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /v1/tasks`

#### –ó–∞–ø—Ä–æ—Å

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**

```
Authorization: Bearer demo-token
Content-Type: application/json
X-Request-ID: req-003
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "title": "–ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª",
  "description": "–ü—Ä–æ—á–∏—Ç–∞—Ç—å –ª–µ–∫—Ü–∏—é –ø–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º",
  "due_date": "2026-01-15"
}
```

| –ü–æ–ª–µ          | –¢–∏–ø    | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ                             |
| ------------- | ------ | -------------- | ------------------------------------ |
| `title`       | string | –î–∞             | –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏                     |
| `description` | string | –ù–µ—Ç            | –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ                   |
| `due_date`    | string | –ù–µ—Ç            | –î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—Ñ–æ—Ä–º–∞—Ç: YYYY-MM-DD) |

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (201 Created)

```json
{
  "id": "t_001",
  "title": "–ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª",
  "description": "–ü—Ä–æ—á–∏—Ç–∞—Ç—å –ª–µ–∫—Ü–∏—é –ø–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º",
  "due_date": "2026-01-15",
  "done": false
}
```

| –ü–æ–ª–µ          | –¢–∏–ø     | –û–ø–∏—Å–∞–Ω–∏–µ                        |
| ------------- | ------- | ------------------------------- |
| `id`          | string  | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏ |
| `title`       | string  | –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏                |
| `description` | string  | –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏                 |
| `due_date`    | string  | –î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è                 |
| `done`        | boolean | –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è               |

#### –û—à–∏–±–∫–∏

**400 Bad Request**

```json
{
  "error": "invalid request"
}
```

#### –ü—Ä–∏–º–µ—Ä curl

```bash
curl -i -X POST http://localhost:8082/v1/tasks \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer demo-token" \
  -H "X-Request-ID: req-003" \
  -d '{
    "title": "–ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª",
    "description": "–ü—Ä–æ—á–∏—Ç–∞—Ç—å –ª–µ–∫—Ü–∏—é –ø–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º",
    "due_date": "2026-01-15"
  }'
```

---

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /v1/tasks`

#### –ó–∞–ø—Ä–æ—Å

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**

```
Authorization: Bearer demo-token
X-Request-ID: req-004
```

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)

```json
[
  {
    "id": "t_001",
    "title": "–ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª",
    "done": false
  },
  {
    "id": "t_002",
    "title": "–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∞–∫—Ç–∏–∫—É",
    "done": true
  }
]
```

#### –ü—Ä–∏–º–µ—Ä curl

```bash
curl -i http://localhost:8082/v1/tasks \
  -H "Authorization: Bearer demo-token" \
  -H "X-Request-ID: req-004"
```

---

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ ID

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /v1/tasks/{id}`

#### –ó–∞–ø—Ä–æ—Å

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**

```
Authorization: Bearer demo-token
X-Request-ID: req-005
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `id` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `t_001`) |

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)

```json
{
  "id": "t_001",
  "title": "–ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª",
  "description": "–ü—Ä–æ—á–∏—Ç–∞—Ç—å –ª–µ–∫—Ü–∏—é –ø–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º",
  "due_date": "2026-01-15",
  "done": false
}
```

#### –û—à–∏–±–∫–∏

**404 Not Found**

```json
{
  "error": "task not found"
}
```

#### –ü—Ä–∏–º–µ—Ä curl

```bash
curl -i http://localhost:8082/v1/tasks/t_001 \
  -H "Authorization: Bearer demo-token" \
  -H "X-Request-ID: req-005"
```

---

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `PATCH /v1/tasks/{id}`

#### –ó–∞–ø—Ä–æ—Å

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**

```
Authorization: Bearer demo-token
Content-Type: application/json
X-Request-ID: req-006
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `id` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `t_001`) |

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** (–≤—Å–µ –ø–æ–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã)

```json
{
  "title": "–ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)",
  "description": "–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Å–ø–µ–∫—Ç",
  "due_date": "2026-01-20",
  "done": true
}
```

| –ü–æ–ª–µ          | –¢–∏–ø     | –û–ø–∏—Å–∞–Ω–∏–µ                |
| ------------- | ------- | ----------------------- |
| `title`       | string  | –ù–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫         |
| `description` | string  | –ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ          |
| `due_date`    | string  | –ù–æ–≤–∞—è –¥–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è   |
| `done`        | boolean | –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è |

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK)

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É:

```json
{
  "id": "t_001",
  "title": "–ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)",
  "description": "–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Å–ø–µ–∫—Ç",
  "due_date": "2026-01-20",
  "done": true
}
```

#### –û—à–∏–±–∫–∏

**400 Bad Request**

```json
{
  "error": "invalid request"
}
```

**404 Not Found**

```json
{
  "error": "task not found"
}
```

#### –ü—Ä–∏–º–µ—Ä curl

```bash
curl -i -X PATCH http://localhost:8082/v1/tasks/t_001 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer demo-token" \
  -H "X-Request-ID: req-006" \
  -d '{
    "title": "–ò–∑—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)",
    "done": true
  }'
```

---

### 5. –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `DELETE /v1/tasks/{id}`

#### –ó–∞–ø—Ä–æ—Å

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**

```
Authorization: Bearer demo-token
X-Request-ID: req-007
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `id` | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `t_001`) |

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (204 No Content)

–û—Ç–≤–µ—Ç –±–µ–∑ —Ç–µ–ª–∞.

#### –û—à–∏–±–∫–∏

**404 Not Found**

```json
{
  "error": "task not found"
}
```

#### –ü—Ä–∏–º–µ—Ä curl

```bash
curl -i -X DELETE http://localhost:8082/v1/tasks/t_001 \
  -H "Authorization: Bearer demo-token" \
  -H "X-Request-ID: req-007"
```

---

## üß™ –ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
#!/bin/bash

echo "üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤"
echo "============================="

# 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
echo -e "\nüìå 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:"
TOKEN=$(curl -s -X POST http://localhost:8081/v1/auth/login \
  -H "Content-Type: application/json" \
  -H "X-Request-ID: test-001" \
  -d '{"username":"student","password":"student"}' | jq -r '.access_token')
echo "   –¢–æ–∫–µ–Ω: $TOKEN"

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
echo -e "\nüìå 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞:"
curl -s -X GET http://localhost:8081/v1/auth/verify \
  -H "Authorization: Bearer $TOKEN" \
  -H "X-Request-ID: test-002" | jq

# 3. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
echo -e "\nüìå 3. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:"
TASK_ID=$(curl -s -X POST http://localhost:8082/v1/tasks \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -H "X-Request-ID: test-003" \
  -d '{"title":"–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞","description":"–û–ø–∏—Å–∞–Ω–∏–µ"}' | jq -r '.id')
echo "   ID –∑–∞–¥–∞—á–∏: $TASK_ID"

# 4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á
echo -e "\nüìå 4. –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á:"
curl -s -X GET http://localhost:8082/v1/tasks \
  -H "Authorization: Bearer $TOKEN" \
  -H "X-Request-ID: test-004" | jq

# 5. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ ID
echo -e "\nüìå 5. –ó–∞–¥–∞—á–∞ $TASK_ID:"
curl -s -X GET http://localhost:8082/v1/tasks/$TASK_ID \
  -H "Authorization: Bearer $TOKEN" \
  -H "X-Request-ID: test-005" | jq

# 6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
echo -e "\nüìå 6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:"
curl -s -X PATCH http://localhost:8082/v1/tasks/$TASK_ID \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -H "X-Request-ID: test-006" \
  -d '{"done":true}' | jq

# 7. –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
echo -e "\nüìå 7. –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:"
curl -i -X DELETE http://localhost:8082/v1/tasks/$TASK_ID \
  -H "Authorization: Bearer $TOKEN" \
  -H "X-Request-ID: test-007"

echo -e "\n‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
```

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### Auth Service

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å              | –û–ø–∏—Å–∞–Ω–∏–µ         | –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞              | –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç           |
| ----- | ----------------- | ---------------- | ------------------------- | ------------------------ |
| POST  | `/v1/auth/login`  | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ | `{"username","password"}` | `200` + —Ç–æ–∫–µ–Ω            |
| GET   | `/v1/auth/verify` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞  | -                         | `200` + `{"valid":true}` |

### Tasks Service

| –ú–µ—Ç–æ–¥  | –ü—É—Ç—å             | –û–ø–∏—Å–∞–Ω–∏–µ          | –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞                         | –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç       |
| ------ | ---------------- | ----------------- | ------------------------------------ | -------------------- |
| POST   | `/v1/tasks`      | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏   | `{"title","description","due_date"}` | `201` + –∑–∞–¥–∞—á–∞       |
| GET    | `/v1/tasks`      | –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á      | -                                    | `200` + –º–∞—Å—Å–∏–≤ –∑–∞–¥–∞—á |
| GET    | `/v1/tasks/{id}` | –ó–∞–¥–∞—á–∞ –ø–æ ID      | -                                    | `200` + –∑–∞–¥–∞—á–∞       |
| PATCH  | `/v1/tasks/{id}` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ | –õ—é–±—ã–µ –ø–æ–ª—è –∑–∞–¥–∞—á–∏                    | `200` + –∑–∞–¥–∞—á–∞       |
| DELETE | `/v1/tasks/{id}` | –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏   | -                                    | `204`                |

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Auth Service

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è  | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ              |
| ----------- | --------------------- | --------------------- |
| `AUTH_PORT` | `8081`                | –ü–æ—Ä—Ç –¥–ª—è HTTP —Å–µ—Ä–≤–µ—Ä–∞ |

### Tasks Service

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è      | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é   | –û–ø–∏—Å–∞–Ω–∏–µ                 |
| --------------- | ----------------------- | ------------------------ |
| `TASKS_PORT`    | `8082`                  | –ü–æ—Ä—Ç –¥–ª—è HTTP —Å–µ—Ä–≤–µ—Ä–∞    |
| `AUTH_BASE_URL` | `http://localhost:8081` | –ë–∞–∑–æ–≤—ã–π URL Auth —Å–µ—Ä–≤–∏—Å–∞ |

---

## üîç –ü—Ä–∏–º–µ—Ä—ã —Å –æ—à–∏–±–∫–∞–º–∏

### 1. –ó–∞–ø—Ä–æ—Å –±–µ–∑ —Ç–æ–∫–µ–Ω–∞

```bash
curl -i http://localhost:8082/v1/tasks
```

**–û—Ç–≤–µ—Ç:**

```
HTTP/1.1 401 Unauthorized
Content-Type: application/json

{"error":"missing authorization header"}
```

### 2. –ó–∞–ø—Ä–æ—Å —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ç–æ–∫–µ–Ω–æ–º

```bash
curl -i http://localhost:8082/v1/tasks \
  -H "Authorization: Bearer wrong-token"
```

**–û—Ç–≤–µ—Ç:**

```
HTTP/1.1 401 Unauthorized
Content-Type: application/json

{"error":"invalid token"}
```

### 3. –ó–∞–ø—Ä–æ—Å –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–¥–∞—á–µ

```bash
curl -i http://localhost:8082/v1/tasks/t_999 \
  -H "Authorization: Bearer demo-token"
```

**–û—Ç–≤–µ—Ç:**

```
HTTP/1.1 404 Not Found
Content-Type: application/json

{"error":"task not found"}
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–¢–∞–π–º–∞—É—Ç—ã:** Tasks Service –æ–∂–∏–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç –æ—Ç Auth Service –Ω–µ –±–æ–ª–µ–µ 2-3 —Å–µ–∫—É–Ω–¥
2. **Request-ID:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
3. **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** –í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (—Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ)
4. **–¢–æ–∫–µ–Ω—ã:** –í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω "demo-token"

---

_–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–Ω—è—Ç–∏—è ‚Ññ1_
_–ö—É—Ä—Å: –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è_
_–°–µ–º–µ—Å—Ç—Ä: 2 —Å–µ–º–µ—Å—Ç—Ä, 2025-2026 –≥–≥._

```

Este archivo `pz17_api.md` contiene:
- Documentaci√≥n completa de todos los endpoints
- Ejemplos de request y response
- C√≥digos de error
- Ejemplos de curl para cada endpoint
- Un script completo de prueba
- Tablas resumen
- Casos de error comunes

El archivo est√° listo para ser colocado en la carpeta `docs/` de tu proyecto.
```
